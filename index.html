<html>
  <head>
    <title></title>
    <script src="jquery.js"></script>
    <script src="sockjs.js"></script>
    <script src="vertxbus.js"></script>

    <script>
      $(function() {
        var eb = new vertx.EventBus('http://localhost:9090/eventbus');

        eb.onopen = function() {
          $('#status').click(function() {
            $('#status').text('Connected...');
            eb.send("register-user", $('#username').val(), function(incoming) {
              $.each(incoming.users, function() {
                $('#users').append('<li>' + this + '</li>');
              });

              eb.registerHandler('new-presence', function(message) {
                $('#users').append('<li>' + message + '</li>');
              });


            });
          });
        }
      });
    </script>

  </head>

  <body>
    <div>
      <input type="text" placeholder="Username" id="username">
      <button id="status"> . : Connect : . </button>
    </div>

    <div>
      <ul id="users">
      </ul>
    </div>
  </body>

</html>
